define(function(){return"﻿﻿\r\n<script type=\"text/lizard-config\">\r\n{\r\n  url_schema: '/ui/user_defined_layer',\r\n  viewName: 'ui_user_defined_layer',\r\n  models: {\r\n    apis: [],\r\n    filter: function(datas) {\r\n      return {\r\n\r\n      };\r\n    }\r\n  },\r\n  view:{\r\n    viewport: Lizard.T(\"viewportTmpl\")\r\n  },\r\n  controller: 'webresource/controllers/ui/user_defined_layer.js'\r\n}\r\n</script>\r\n\r\n<script id=\"viewportTmpl\" type=\"text/lizard-template\">\r\n  %3Cstyle%20type%3D%22text/css%22%3E%0D%0A%20%20%20%20.hotel-p-s-filter%20%7B%0D%0A%20%20%20%20%20%20position%3A%20fixed%3B%0D%0A%20%20%20%20%20%20z-index%3A%20300%3B%0D%0A%20%20%20%20%20%20bottom%3A%200%3B%0D%0A%20%20%20%20%20%20width%3A%20100%25%3B%0D%0A%20%20%20%20%20%20padding%3A%2010px%3B%0D%0A%20%20%20%20%20%20box-sizing%3A%20border-box%3B%0D%0A%20%20%20%20%20%20background%3A%20%23efefef%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20.hotel-p-s-filter%20dt%20%7B%0D%0A%20%20%20%20%20%20%20%20font-size%3A%2014px%3B%0D%0A%20%20%20%20%20%20%20%20padding-bottom%3A%205px%3B%0D%0A%20%20%20%20%20%20%20%20clear%3A%20left%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20.hotel-p-s-filter%20dd%20%7B%0D%0A%20%20%20%20%20%20%20%20float%3A%20left%3B%0D%0A%20%20%20%20%20%20%20%20background%3A%20%23fff%3B%0D%0A%20%20%20%20%20%20%20%20width%3A%2025%25%3B%0D%0A%20%20%20%20%20%20%20%20padding%3A%2010px%200%3B%0D%0A%20%20%20%20%20%20%20%20margin-bottom%3A%2010px%3B%0D%0A%20%20%20%20%20%20%20%20text-align%3A%20center%3B%0D%0A%20%20%20%20%20%20%20%20margin-left%3A%20-2px%3B%0D%0A%20%20%20%20%20%20%20%20font-size%3A%2011px%3B%0D%0A%20%20%20%20%20%20%20%20white-space%3A%20nowrap%3B%0D%0A%20%20%20%20%20%20%20%20letter-spacing%3A%20-1px%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20.hotel-p-s-filter%20dd.current%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20background%3A%20%23099fde%3B%0D%0A%20%20%20%20%20%20%20%20%20%20color%3A%20%23fff%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20.hotel-p-s-filter%20dt%3Anth-of-type%282%29%20%7E%20dd%20%7B%0D%0A%20%20%20%20%20%20%20%20width%3A%2033.33333%25%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20.hotel-p-s-filter%20.g_btn_s%20%7B%0D%0A%20%20%20%20%20%20%20%20clear%3A%20left%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20.hotel-p-s-filter%20.g_btn_s%20%7B%0D%0A%20%20%20%20%20%20%20%20clear%3A%20left%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20.g_btn_s%20%7B%0D%0A%20%20%20%20%20%20color%3A%20%23FFF%3B%0D%0A%20%20%20%20%20%20font-size%3A%2018px%3B%0D%0A%20%20%20%20%20%20width%3A%20100%25%3B%0D%0A%20%20%20%20%20%20height%3A%2044px%3B%0D%0A%20%20%20%20%20%20line-height%3A%2044px%3B%0D%0A%20%20%20%20%20%20display%3A%20block%3B%0D%0A%20%20%20%20%20%20-webkit-border-radius%3A%203px%3B%0D%0A%20%20%20%20%20%20-moz-border-radius%3A%203px%3B%0D%0A%20%20%20%20%20%20border-radius%3A%203px%3B%0D%0A%20%20%20%20%20%20margin%3A%200%20auto%3B%0D%0A%20%20%20%20%20%20text-align%3A%20center%3B%0D%0A%20%20%20%20%20%20background-color%3A%20%23ff9a14%3B%0D%0A%20%20%20%20%20%20-webkit-tap-highlight-color%3A%20%23ff8c00%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%3C/style%3E\r\n <div class=\"cui-citys-bd\">\r\n </div>\r\n<pre><code>\r\n/*\r\n所有弹出层组件的基类为UILayer，该类组件具有以下特性：\r\n① 为定位元素\r\n② 具有mask蒙版特性（可有可无）\r\n③ 具有居中特性（如果非居中需要定制reposition函数，比如气泡组件，底部弹出组件）\r\n④ 具有动画特性，这个根据组件不同，有所不同\r\n\r\n以下为一些关键属性说明：\r\n//为组件蒙版，所以继承至UILayer的组件都会有\r\nthis.mask = new UIMask();\r\n//是否需要显示mask蒙版\r\nthis.needMask = true;\r\n\r\n//需要点击蒙版删除\r\nthis.maskToHide = true;\r\n//需要居中定位\r\nthis.needReposition = true;\r\n//是否具有后退关闭弹出层需求（该属性不建议使用，将要废弃）\r\nthis.hasPushState = (history && history.pushState);\r\nthis.hasPushState = false;\r\n\r\n//是否具有动画\r\nthis.needAnimat = true;\r\n//如果具有动画，显示时的class以及隐藏时候的class\r\nthis.animateInClass = 'cm-up-in';\r\nthis.animateOutClass = 'cm-up-out';\r\n\r\n//框架提供动画不支持时，自定义动画回调，同样需要设置needAnimate为true\r\nthis.animateShowAction = null;\r\nthis.animateHideAction = null;\r\n*/  \r\n</code></pre>\r\n\r\n  <div class=\"form-item\">\r\n    <label class=\"field-label\">标题</label>\r\n    <input type=\"text\" class=\"field-text demo01_title\" placeholder=\"请输入标题\" value=\"标题\">\r\n  </div>\r\n  <div class=\"form-item\">\r\n    <label class=\"field-label\">内容</label>\r\n    <input type=\"text\" class=\"field-text demo01_content\" placeholder=\"请输入内容\" value=\"内容\">\r\n  </div>\r\n  <span class=\" js_demo01 btn-primary full-width\">简单自定义弹出层</span>\r\n<pre>\r\n<code>\r\n//这里首先得形成一个类\r\nvar SimpleLayer = _.inherit(UILayer, {\r\n  propertys: function ($super) {\r\n    $super();\r\n    this.datamodel = {\r\n      title: '0',\r\n      content: '1'\r\n    };\r\n    //每个组件都需要一个template模板字符串\r\n    this.template = '&lt;div class=\"self-layer\" style=\"border: 1px solid gray; background: white; color: black ; \"&gt;&lt;div class=\"self-title\"&gt;&lt;%=title%&gt;&lt;/div&gt;&lt;div class=\"self-content\"&gt;&lt;%=content%&gt;&lt;/div&gt;&lt;/div&gt;';\r\n  },\r\n  setDatamodel: function (title, content) {\r\n    this.datamodel = {\r\n      title: title,\r\n      content: content\r\n    };\r\n    this.refresh();\r\n  },\r\n  initialize: function ($super, opts) {\r\n    $super(opts);\r\n  }\r\n});\r\n\r\n//然后这里就可以调用了\r\nif (!this.layer01) {\r\n  this.layer01 = new SimpleLayer({\r\n    datamodel: {\r\n      title: this.$('.demo01_title').val(),\r\n      content: this.$('.demo01_content').val()\r\n    }\r\n  });\r\n} else {\r\n  this.layer01.setDatamodel(this.$('.demo01_title').val(), this.$('.demo01_content').val());\r\n}\r\nthis.layer01.show();\r\n\r\n//在onhide的时候需要资源释放\r\nonHide: function () {\r\n  if (this.layer01) this.layer01.hide();\r\n}\r\n\r\n</code>\r\n</pre>\r\n\r\n  <span class=\" js_demo02 btn-primary full-width\">复杂的应用，底部弹出，功能复杂</span>\r\n\r\n  <pre><code>\r\n    //这里只做简单实现，实际场景会复杂一些，这里有一部分css，我直接拷贝到模板里了\r\nvar PriceLayer = _.inherit(UILayer, {\r\n  propertys: function ($super) {\r\n    $super();\r\n    //不需要包裹层\r\n    this.needRootWrapper = false;\r\n    this.needMask = true;\r\n    //不需要定位\r\n    this.needReposition = false;\r\n    //动画class定制化\r\n    this.animateInClass = 'cm-down-in';\r\n    this.animateOutClass = 'cm-down-out';\r\n    //每个组件都需要一个template模板字符串\r\n    this.template = '&lt;div class=\"hotel-p-s-filter js_price_star_filter\" style=\"z-index:9999\"&gt;&lt;dl&gt;&lt;dt&gt;价格(单选)&lt;/dt&gt;&lt;dd class=\"js_price_h js_price_all current\"&gt;不限&lt;/dd&gt;&lt;dd class=\"js_price_h\" data-price=\"0,150\"&gt;￥150元以下&lt;/dd&gt;&lt;dd class=\"js_price_h\" data-price=\"150,300\"&gt;￥150-￥300&lt;/dd&gt;&lt;dd class=\"js_price_h\" data-price=\"301,450\"&gt;￥301-￥450&lt;/dd&gt;&lt;dd class=\"js_price_h\" data-price=\"451,600\"&gt;￥451-￥600&lt;/dd&gt;&lt;dd class=\"js_price_h\" data-price=\"601,1000\"&gt;￥601-￥1000&lt;/dd&gt;&lt;dd class=\"js_price_h\" data-price=\"1000\"&gt;￥1000以上&lt;/dd&gt;&lt;dt&gt;星级(复选)&lt;/dt&gt;&lt;dd class=\"js_star_h js_star_all current\"&gt;不限&lt;/dd&gt;&lt;dd class=\"js_star_h\" data-star=\"liansuo\" data-text=\"快捷连锁\"&gt;快捷连锁&lt;/dd&gt;&lt;dd class=\"js_star_h\" data-star=\"0|1|2\" data-text=\"二星级及以下/经济\"&gt;二星级及以下/经济&lt;/dd&gt;&lt;dd class=\"js_star_h\" data-star=\"3\" data-text=\"三星级/舒适\"&gt;三星级/舒适&lt;/dd&gt;&lt;dd class=\"js_star_h\" data-star=\"4\" data-text=\"四星级/高档\"&gt;四星级/高档&lt;/dd&gt;&lt;dd class=\"js_star_h\" data-star=\"5\" data-text=\"五星级/豪华\"&gt;五星级/豪华&lt;/dd&gt;&lt;div class=\"mt10\"&gt;&lt;button class=\"g_btn_s js_price_star_filter_ok\"&gt;确定&lt;/button&gt;&lt;/div&gt;&lt;/dl&gt;&lt;/div&gt;';\r\n    //事件定义\r\n    this.addEvents({\r\n      'click dd': 'priceItemAction',\r\n      'click .js_price_star_filter_ok': 'priceOkAction'\r\n    });\r\n  },\r\n  priceItemAction: function (e) {\r\n    var el = $(e.currentTarget);\r\n    if (el.hasClass('js_price_h')) {\r\n      this.$('dd.js_price_h').removeClass('current');\r\n    } else {\r\n      this.$('dd.js_star_h').removeClass('current');\r\n    }\r\n    el.addClass('current');\r\n  },\r\n  priceOkAction: function () {\r\n    this.hide();\r\n  },\r\n  addEvent: function ($super) {\r\n    $super();\r\n    this.on('onCreate', function () {\r\n      this.$el.removeClass('cui-layer');\r\n    });\r\n  },\r\n  initialize: function ($super, opts) {\r\n    $super(opts);\r\n  }\r\n});    \r\n\r\n//调用的时候\r\nif (!this.layer02) {\r\n  this.layer02 = new PriceLayer({});\r\n} \r\nthis.layer02.show();\r\n\r\n//onHide的时候记得资源销毁\r\nonHide: function () {\r\n  if (this.layer01) this.layer01.hide();\r\n  if (this.layer02) this.layer02.hide();\r\n}   \r\n    </code></pre>\r\n\r\n</script>"});