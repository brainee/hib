<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<title>Document</title>
</head>
<body>

<textarea id="codeIpt" style="width:500px;height:300px;display:block;">

	<div abc=123 def="456" efg=  '354'>
		<span>i am stupid</span>
		<ul>
			<li><!-- modify by cdchu --></li>
		</ul>
	</div>

	<div>
		<div>missing close tag
	</div>

	<div>
		</span>wrong close tag
	</div abc="123">wrong attr

	<div>
		missing end tag

</textarea>

<textarea id="testIpt" style="width:500px;height:100px;display:block;">
parser.root.find('div').text()
</textarea>

<div>
	<input id="runBtn" type="button" value="RUN" />
</div>

<textarea id="resultIpt" style="width:500px;height:100px;display:block;" readonly>
</textarea>

<script type="text/javascript" src="../htmlparser_v8.js"></script>

<script type="text/javascript">
var codeIpt=document.getElementById('codeIpt');
var testIpt=document.getElementById('testIpt');
var resultIpt=document.getElementById('resultIpt');
var runBtn=document.getElementById('runBtn');
runBtn.onclick=function(){
	var parser=new htmlParse(codeIpt.value);
	var testCode=testIpt.value;
	var ret=null;
	try {
		ret=eval(testCode);
	}catch(e){}
	resultIpt.value=(ret||'').toString();
	if (window.console&&console.log){
		console.log(ret);
	}
};
</script>
</body>
</html>